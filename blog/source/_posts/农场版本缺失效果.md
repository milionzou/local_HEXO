---
title: 农场V1.0版本
date: 2023-03-17 10:09:46
tags: 大型功能模块
---
{% folding yellow, 差异优化 %}

- 【种植收获】如果选中土地在屏幕红框的这片区域，不会每次选中土地，都拖视角，切换起来很晕  ：需要更改逻辑暂未处理
- 【种植收获】种植详情和种植物列表    只有在往上或者下移动才会消失  :最初需求不明确，导致开 发无法更改
- 【种植收获】锄头挖地动画还没消失时，点击土地，没反应，Ａｐｐ可以直接呼起种植栏 进行 种植  ：最开始设计没有设计挖地时候可以种植功能，也没有相关需求，改动较大且没有必要感觉，这个版本暂不处理
- 【种植收获】选中农田 光效层级问题
- 【种植收获】种植物  拖动的图标需要拖动至一半时才会完全隐藏详情框和操作框  ：这个和那个植物详情一样，最开始并未设计这个需求的功能模块，需要改动操作类的判断逻辑，改动略大，列未优化项这个版本暂时不处理
{% endfolding %}

{% folding yellow, 红点 %} 
- 农场成就红点 有出现  领了消失（已完成验证）
- 客人需求红点 👇
- 当没有客人需求时，电视机按钮消失，当客人有new时，电视机出现红点  （已完成验证）
- 当道具满足需求数量时一直存在红点  仓库道具不足以及完成客人需求后，红点消失  （已完成验证）
- 加工品可收获时 👇
- 加工品可收获时，每次登陆，农场入口显示红点     进入农场后，入口红点消失，本次登陆不再显示该红点
- 当有新的加工品可领取时，入口提示红点，进入界面后，红点消失   新的加工品可领取：指正在加工的产品变为可领取状态，且玩家处于在线状态，不在农场界面中
- 种植物可收获时 👇
- 植物可收获时，每次登陆，农场入口显示红点，进入农场后，入口红点消失，本次登陆不再显示该红点
- 玩家在线时，当有新的植物成熟可领取时，入口提示红点，进入界面后，红点消失
- 可领取：指正在种植的植物变为可领取状态，且玩家处于在线状态，不在农场界面中
- 飞机订单 👇
- 飞机订单刷新时，显示红点，进入飞机订单界面后，该提示红点消失 
- 飞机订单可提交 仓库内道具数量满足订单提交条件时红点 （已完成验证）  完成或者提交后红点消失
- 协助飞机订单  👇
- 有帮助次数时 农场飞机入口显示红点 切换至帮助分页后，入口红点消失，只在分页上显示
- 若帮助分页内无请求内容，不显示红点
- 飞机订单有奖励可出发时   出现红点   出发后红点消失
- 货架 （农场触发红点、家具出现气泡）
- 前置：有空货架 或者  该商品已售完状态的货架栏  获得时触发红点 （农场触发红点、家具出现气泡、左下角出现快捷入口）
- 商品出售完成之后出现 红点 点击消失  、   每天第一次上线后消失（1号买完看了售尽的红点  2号上线会看到红点）
- 将可上架的商品消耗至0后或者仓库清零后或者查看货架界面后红点消失  
- 判断货架是否为空 空：气泡保留   不为空：气泡消失
{% endfolding %}


## 农场相关 GM
//刷新农场快递车任务(gs)
GMRefreshFarmCar(userID int64)

//设置农场快递车已请求帮助次数(gs)
GMSetFarmCarSendHelpCount(userID int64,count int32)

//设置农场快递车已帮助次数(gs)
GMSetFarmCarHelpCount(userID int64,count int32)

//设置农场快递车任务记录(gs) htype 0-帮助次数 1-任务完成次数 2-完成轮次次数
GMSetFarmCarHelpCountRecord(userID int64,htype int8,count int32)

//设置农场快递车上轮结算时间(gs)
GMSetFarmCarStartTime(userID int64,deltaMinutes int64)

//设置农场飞机刷新次数
GMSetFarmPlaneCount(userID int64,count int32)

//处理农场委托 typ 1-刷新所有任务 2-刷新指定任务 3-设置帮助和请求帮助次数 param 需要指定的值
GMTestFarmEntrust(userID int64,typ int32,param int32)

//获得：升级、发传单、自然恢复/s
GmChangeVendingWallet(3001168, -40719)  增加或减少货架资金


### 【真机情况】
{% folding yellow, 差异优化 %}
快速完成商品会导致 飞机订单花蕊币重叠
聊天框需要主动发送一条消息才能不点击聊天框里就能看见聊天内容



{% endfolding %}
