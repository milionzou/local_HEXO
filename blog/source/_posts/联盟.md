---
title: 联盟
date: 2023-04-03 17:55:42
---
{% folding yellow, 联盟相关GM %}
//加粉丝数(center) 
 GMAddAsFans(userID int64, addFans int64, isActive int)   isActive=0 总粉丝   isActive=1：本周周末粉丝

//遇到账号已有联盟的提示解决方法(center) 
GetAllianceErrCaptainerByUserID(userID)
在gs服也就是你账号所在的区服执行gm命令 
SetUserAsId(userid, asID)
重新登录

//添加联盟等级经验(center) 
 AddAllianceLevelExp(asId int32, exp int64)

//设置加入联盟时间
SetUserJoinAllianceMs(userID, deltaHours int64)

//设置离开联盟时间
SetAllianceSelfQuitTimeMs(userID, deltaHours int64)

//重置联盟展会新关卡(center) 
 GMResetAllianceDungeonBoss(asId int32)

// isMaster: 是否以文件中的服务器ID作为主服务器ID发送邮件(center) 
 GMSendMailsToSpecifiedServers(startTime, endTime int64, isMaster bool)

//设置联盟展会关卡及进度(center) 
 GMSetAllianceDungeonBossLevelAndScore(asId int32, level int8, curScore int64)

//增加联盟展会次数
SetAllianeBossFightNum(userID int64, num int32)

//增加退出联盟的时间
SetAllianceSelfQuitTimeMs(userID, deltaHours int64)

//设置加入时间
SetUserJoinAllianceMs(userID, deltaHours int64)

//添加联盟等级经验(center) 
AddAllianceLevelExp(asId int32, exp int64)

{% endfolding %}

{% folding yellow, 联盟相关日志查询 %}
 GmShowAllianceBuffAndBuffRewardFlagMap(asID int32)
- grep "dealwhitGetAllianceExtrendRewardByBuff" center.log   查询可领取多少粉丝

- grep "itemAddFans.*.P_alliance_pop_fans_req" ./gs1.log -R -n  查询道具加成  不算贵重物

- cat ./gs1.log | grep 'addFansOrigin'  查询粉丝获取  选择题、小游戏、贵重物
{% endfolding %}


{% folding yellow, 联盟相关对照表 %}
- 联盟推广
  - 每轮百分比获得的加成：AllianceAdvertise
  - 推广奖励：AllianceAdvertiseReward
- 联盟签到
  - 联盟等级对应的打卡奖励：Allianceupgrade
- 联盟展会
  - 每轮的奖励
{% endfolding %}
